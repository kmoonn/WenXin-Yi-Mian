import base64
import numpy as np
import cv2

# 从前端获取的Base64编码的图像数据
base64_data = "data:image/jpeg;base64,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"
# 解码Base64数据为字节数据
image_bytes = base64.b64decode(base64_data.split(',')[1])

# 将字节数据转换为NumPy数组
nparr = np.frombuffer(image_bytes, np.uint8)

# 解码NumPy数组为图像对象
image = cv2.imdecode(nparr, cv2.IMREAD_COLOR)

# 保存图像对象为JPEG格式文件
output_filename = "output.jpg"
cv2.imwrite(output_filename, image)

print(f"Image saved as {output_filename}")
